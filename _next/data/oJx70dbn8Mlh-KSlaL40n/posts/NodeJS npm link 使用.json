{"pageProps":{"postData":{"id":"NodeJS npm link 使用","contentHtml":"<h2 id=\"user-content-介绍\"><a href=\"#%E4%BB%8B%E7%BB%8D\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>介绍</h2>\n<p>npm link 链接自己开发的包，而不需要每次测试时都需要再度打包</p>\n<h2 id=\"user-content-语法\"><a href=\"#%E8%AF%AD%E6%B3%95\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>语法</h2>\n<pre><code>npm <span>link</span> (<span>in</span> package <span>dir</span>)\nnpm <span>link</span> [&#x3C;@scope>/]&#x3C;pkg>[@&#x3C;version>]\n<span>alias</span>: npm <span>ln</span>\n<span># 简写形式</span>\n<span>cd</span> ~/project/test-package\nnpm <span>link</span> ../develop-package\n<span># 相当于</span>\n<span>cd</span> ~/project/develop-package\nnpm <span>link</span>\n<span>cd</span> ~/project/test-package\nnpm <span>link</span> develop-package</code></pre>\n<h2 id=\"user-content-原理\"><a href=\"#%E5%8E%9F%E7%90%86\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>原理</h2>\n<p>包链接包含两个步骤</p>\n<ol>\n<li>在想要链接的包文件夹执行<code>npm link</code>，将会在全局文件夹<code>{prefix}/lib/node_modules/&#x3C;package></code>创建符号链接来链接这个包文件</li>\n<li>在测试文件夹执行 <code>npm link &#x3C;执行 npm link 的包package.json中的名称></code>，这样就会在测试文件夹的node_modules创建一个符号链接指向全局安装的包，执行 <code>npm link</code>的包修改时，测试中引入的包也会同步修改</li>\n</ol>\n<h2 id=\"user-content-使用\"><a href=\"#%E4%BD%BF%E7%94%A8\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>使用</h2>\n<h3 id=\"user-content-调试-普通包\"><a href=\"#%E8%B0%83%E8%AF%95-%E6%99%AE%E9%80%9A%E5%8C%85\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>调试 普通包</h3>\n<h3 id=\"user-content-调试-react-包\"><a href=\"#%E8%B0%83%E8%AF%95-react-%E5%8C%85\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>调试 react 包</h3>\n<h3 id=\"user-content-调试-typescript-包\"><a href=\"#%E8%B0%83%E8%AF%95-typescript-%E5%8C%85\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>调试 typescript 包</h3>\n<h3 id=\"user-content-调试-monorepo-包\"><a href=\"#%E8%B0%83%E8%AF%95-monorepo-%E5%8C%85\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>调试 monorepo 包</h3>\n<h4 id=\"user-content-参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" tabindex=\"-1\"><span></span></a>参考：</h4>\n<p><a href=\"https://docs.npmjs.com/cli/v7/commands/npm-link\">npm-link | npm Docs (npmjs.com)</a></p>\n<p>[未完待续...]</p>\n","title":"npm link 使用一览","date":"2021-09-01T11:22:24.000Z","category":"category","tag":null,"cover":null,"description":"description"}},"__N_SSG":true}